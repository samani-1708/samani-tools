/**
 * Minified by jsDelivr using Terser v5.39.0.
 * Original file: /npm/comlinkjs@3.1.1/umd/comlink.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
!function(e){if("object"==typeof module&&"object"==typeof module.exports){var t=e(require,exports);void 0!==t&&(module.exports=t)}else"function"==typeof define&&define.amd?define(["require","exports"],e):e([],self.Comlink={})}((function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=["ArrayBuffer","MessagePort","OffscreenCanvas"].filter((e=>e in self)).map((e=>self[e])),r=Math.floor(Math.random()*Number.MAX_SAFE_INTEGER),a=Symbol("proxyValue"),s=Symbol("throw"),o={canHandle:e=>e&&e[a],serialize:e=>{const{port1:t,port2:n}=new MessageChannel;return c(e,t),n},deserialize:e=>u(e)},i={canHandle:e=>e&&e[s],serialize:e=>{const t=e&&e.message,n=e&&e.stack;return Object.assign({},e,{message:t,stack:n})},deserialize:e=>{throw Object.assign(Error(),e)}};t.transferHandlers=new Map([["PROXY",o],["THROW",i]]);let l=0;function u(e,t){if(w(e)&&(e=v(e)),!h(e))throw Error("endpoint does not have all of addEventListener, removeEventListener and postMessage defined");return m(e),E((async t=>{let n=[];"APPLY"!==t.type&&"CONSTRUCT"!==t.type||(n=t.argumentsList.map(p));const a=await function(e,t,n){const a=`${r}-${l++}`;return new Promise((r=>{g(e,(function t(n){n.data.id===a&&(!function(e,t){e.removeEventListener("message",t)}(e,t),r(n))})),t=Object.assign({},t,{id:a}),e.postMessage(t,n)}))}(e,Object.assign({},t,{argumentsList:n}),b(n));return d(a.data.value)}),[],t)}function f(e){return e[a]=!0,e}function c(e,n){if(w(n)&&(n=v(n)),!h(n))throw Error("endpoint does not have all of addEventListener, removeEventListener and postMessage defined");m(n),g(n,(async function(r){if(!r.data.id||!r.data.callPath)return;const a=r.data;let o=await a.callPath.slice(0,-1).reduce(((e,t)=>e[t]),e),i=await a.callPath.reduce(((e,t)=>e[t]),e),l=i,u=[];if("APPLY"!==a.type&&"CONSTRUCT"!==a.type||(u=a.argumentsList.map(d)),"APPLY"===a.type)try{l=await i.apply(o,u)}catch(e){l=e,l[s]=!0}if("CONSTRUCT"===a.type)try{l=new i(...u),l=f(l)}catch(e){l=e,l[s]=!0}return"SET"===a.type&&(i[a.property]=a.value,l=!0),l=function(e){for(const[n,r]of t.transferHandlers)if(r.canHandle(e)){return{value:{type:n,value:r.serialize(e)}}}return{value:{type:"RAW",value:e}}}(l),l.id=a.id,n.postMessage(l,b([l]))}))}function p(e){for(const[n,r]of t.transferHandlers)if(r.canHandle(e))return{type:n,value:r.serialize(e)};let n=[];for(const r of L(e))for(const[e,a]of t.transferHandlers)a.canHandle(r.value)&&n.push({path:r.path,wrappedValue:{type:e,value:a.serialize(r.value)}});for(const t of n){t.path.slice(0,-1).reduce(((e,t)=>e[t]),e)[t.path[t.path.length-1]]=null}return{type:"RAW",value:e,wrappedChildren:n}}function d(e){if(t.transferHandlers.has(e.type)){return t.transferHandlers.get(e.type).deserialize(e.value)}if(function(e){return"RAW"===e.type}(e)){for(const n of e.wrappedChildren||[]){if(!t.transferHandlers.has(n.wrappedValue.type))throw Error(`Unknown value type "${e.type}" at ${n.path.join(".")}`);const r=t.transferHandlers.get(n.wrappedValue.type).deserialize(n.wrappedValue.value);y(e.value,n.path,r)}return e.value}throw Error(`Unknown value type "${e.type}"`)}function y(e,t,n){const r=t.slice(-1)[0];t.slice(0,-1).reduce(((e,t)=>e[t]),e)[r]=n}function v(e){if("Window"!==self.constructor.name)throw Error("self is not a window");return{addEventListener:self.addEventListener.bind(self),removeEventListener:self.removeEventListener.bind(self),postMessage:(t,n)=>e.postMessage(t,"*",n)}}function h(e){return"addEventListener"in e&&"removeEventListener"in e&&"postMessage"in e}function m(e){(function(e){return"MessagePort"===e.constructor.name})(e)&&e.start()}function g(e,t){e.addEventListener("message",t)}function w(e){return["window","length","location","parent","opener"].every((t=>t in e))}function E(e,t=[],n=function(){}){return new Proxy(n,{construct:(n,r,a)=>e({type:"CONSTRUCT",callPath:t,argumentsList:r}),apply:(n,r,a)=>"bind"===t[t.length-1]?E(e,t.slice(0,-1)):e({type:"APPLY",callPath:t,argumentsList:a}),get(n,r,a){if("then"===r&&0===t.length)return{then:()=>a};if("then"===r){const n=e({type:"GET",callPath:t});return Promise.resolve(n).then.bind(n)}return E(e,t.concat(r),n[r])},set:(n,r,a,s)=>e({type:"SET",callPath:t,property:r,value:a})})}function P(e){return n.some((t=>e instanceof t))}function*L(e,t=[],n=null){if(!e)return;if(n||(n=new WeakSet),n.has(e))return;if("string"==typeof e)return;if("object"==typeof e&&n.add(e),ArrayBuffer.isView(e))return;yield{value:e,path:t};const r=Object.keys(e);for(const a of r)yield*L(e[a],[...t,a],n)}function b(e){const t=[];for(const n of L(e))P(n.value)&&t.push(n.value);return t}t.proxy=u,t.proxyValue=f,t.expose=c}));
//# sourceMappingURL=/sm/a7123a255025e343f77e4a133d1ce3ed897310150e342915d3d1dffddc2c618d.map